---
import { Picture } from "astro:assets";
import EmailIcon from "components/icons/EmailIcon.astro";
import GithubIcon from "components/icons/GithubIcon.astro";
import LinkedInIcon from "components/icons/LinkedInIcon.astro";
import type { Params } from "pages/[...lang].astro";

const { lang } = Astro.params as Params;
const currentYear = new Date().getFullYear();
---

<footer
  class="w-full max-w-3xl mx-auto mt-16 pt-8 border-t border-yellow-300/30 dark:border-yellow-900/30"
>
  <div class="flex flex-col items-center gap-6">
    <!-- Social Links -->
    <div class="flex gap-6">
      <a
        href="https://www.linkedin.com/in/flavio-ore"
        target="_blank"
        rel="noopener noreferrer"
        class="p-3 rounded-full bg-gradient-to-br from-blue-100 to-blue-200 dark:from-blue-900/30 dark:to-blue-800/30 hover:scale-110 hover:rotate-6 transition-all duration-300 hover:shadow-lg group"
        aria-label="LinkedIn"
      >
        <LinkedInIcon
          class="size-6 text-blue-600 dark:text-blue-400 group-hover:animate-sway"
        />
      </a>
      <a
        href="mailto:gonzaloorech@gmail.com"
        class="p-3 rounded-full bg-gradient-to-br from-orange-100 to-orange-200 dark:from-orange-900/30 dark:to-orange-800/30 hover:scale-110 hover:rotate-6 transition-all duration-300 hover:shadow-lg group"
        aria-label="Email"
      >
        <EmailIcon
          class="size-6 text-orange-600 dark:text-orange-400 group-hover:animate-sway"
        />
      </a>
      <a
        href="https://github.com/Flavio-Ore"
        target="_blank"
        rel="noopener noreferrer"
        class="p-3 rounded-full bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-700 hover:scale-110 hover:rotate-6 transition-all duration-300 hover:shadow-lg group"
        aria-label="GitHub"
      >
        <GithubIcon
          class="size-6 text-gray-700 dark:text-gray-300 group-hover:animate-tada"
        />
      </a>
    </div>

    <Picture
      src="https://media.tenor.com/drxH1lO9cfEAAAAj/dark-souls-bonfire.gif"
      width="75"
      height="75"
      alt="Bonfire"
      class="opacity-80 hover:opacity-100 transition-opacity"
    />

    <div class="text-center space-y-2">
      <p class="text-sm dark:text-amber-300 text-amber-700">
        {
          lang === "en"
            ? "Built with Astro, TypeScript & TailwindCSS"
            : "Construido con Astro, TypeScript y TailwindCSS"
        }
      </p>
      <p class="text-sm dark:text-amber-400/70 text-amber-600/70">
        © {currentYear} Flavio Gonzalo Oré. {
          lang === "en"
            ? "All rights reserved."
            : "Todos los derechos reservados."
        }
      </p>
    </div>

    <button
      id="back-to-top"
      class="mt-4 px-4 py-2 rounded-lg bg-gradient-to-r from-orange-500/70 to-amber-400/70 text-white font-medium hover:from-orange-600/70 hover:to-amber-600/70 transition-all hover:scale-105 hover:shadow-lg opacity-0 invisible"
      aria-label="Back to top"
    >
      ↑ {lang === "en" ? "Back to Top" : "Volver Arriba"}
    </button>
  </div>
</footer>

<script>
  const backToTopButton = document.getElementById("back-to-top");

  window.addEventListener("scroll", () => {
    if (window.pageYOffset > 300) {
      backToTopButton?.classList.remove("opacity-0", "invisible");
      backToTopButton?.classList.add("opacity-100", "visible");
    } else {
      backToTopButton?.classList.add("opacity-0", "invisible");
      backToTopButton?.classList.remove("opacity-100", "visible");
    }
  });

  backToTopButton?.addEventListener("click", () => {
    window.scrollTo({ top: 0, behavior: "smooth" });
  });
</script>

---
import { Picture } from "astro:assets";
import { useTranslations } from "i18n/utils";
import type { Params } from "pages/[...lang].astro";

const { lang } = Astro.params as Params;
const t = useTranslations(lang);
const currentYear = new Date().getFullYear();
---

<footer
  class="w-full max-w-3xl mx-auto mt-16 pt-8 border-t border-yellow-300/30 dark:border-yellow-900/30"
>
  <div class="flex flex-col items-center gap-6">
    <Picture
      src="https://media.tenor.com/drxH1lO9cfEAAAAj/dark-souls-bonfire.gif"
      width="75"
      height="75"
      alt="Bonfire"
      class="opacity-80 hover:opacity-100 transition-opacity"
    />

    <div class="text-center space-y-2">
      <p class="text-sm dark:text-amber-300 text-amber-700">
        {t("footer.builtWith")}
      </p>
      <p class="text-sm dark:text-amber-400/70 text-amber-600/70">
        © {currentYear} Flavio Gonzalo Oré. {t("footer.rights")}
      </p>
    </div>

    <button
      id="back-to-top"
      class="mt-4 px-4 py-2 rounded-lg bg-gradient-to-r from-orange-500/70 to-amber-400/70 text-white font-medium hover:from-orange-600/70 hover:to-amber-600/70 transition-all hover:scale-105 hover:shadow-lg opacity-0 invisible"
      aria-label="Back to top"
    >
      ↑
    </button>
  </div>
</footer>

<script>
  const backToTopButton = document.getElementById("back-to-top");

  window.addEventListener("scroll", () => {
    if (window.pageYOffset > 300) {
      backToTopButton?.classList.remove("opacity-0", "invisible");
      backToTopButton?.classList.add("opacity-100", "visible");
    } else {
      backToTopButton?.classList.add("opacity-0", "invisible");
      backToTopButton?.classList.remove("opacity-100", "visible");
    }
  });

  backToTopButton?.addEventListener("click", () => {
    window.scrollTo({ top: 0, behavior: "smooth" });
  });
</script>

---
import EmailIcon from "components/icons/EmailIcon.astro";
import GithubIcon from "components/icons/GithubIcon.astro";
import LinkedInIcon from "components/icons/LinkedInIcon.astro";
import { useTranslations } from "i18n/utils";
import type { Params } from "pages/[...lang].astro";

const { lang } = Astro.params as Params;
const t = useTranslations(lang);
---

<section id="contact" class="w-full max-w-3xl mx-auto mt-16 mb-16 scroll-mt-20">
  <h3
    class="text-3xl font-bold mb-8 dark:text-amber-200 text-amber-500 text-center md:text-left"
  >
    {t("contact.title")}
  </h3>

  <div class="grid md:grid-cols-2 gap-8">
    <!-- Contact Info -->
    <div class="space-y-6">
      <div>
        <h4
          class="text-xl font-semibold mb-4 dark:text-amber-300 text-amber-600"
        >
          {t("contact.subtitle")}
        </h4>
        <p class="text-base dark:text-amber-100 text-amber-900 mb-6">
          {t("contact.description")}
        </p>
      </div>

      <div class="space-y-4">
        <a
          href="mailto:gonzaloorech@gmail.com"
          class="flex items-center gap-4 p-4 rounded-lg border border-yellow-300 dark:border-yellow-900 bg-white/50 dark:bg-black/20 hover:border-orange-500 dark:hover:border-orange-500 hover:shadow-lg transition-all group"
        >
          <div
            class="p-3 rounded-lg bg-orange-100 dark:bg-orange-900/30 group-hover:scale-110 transition-transform"
          >
            <EmailIcon class="size-6 text-orange-600 dark:text-orange-400" />
          </div>
          <div>
            <p class="text-sm font-semibold dark:text-amber-300 text-amber-700">
              Email
            </p>
            <p
              class="text-base dark:text-amber-100 text-amber-900 group-hover:text-orange-500 dark:group-hover:text-orange-400 transition-colors"
            >
              gonzaloorech@gmail.com
            </p>
          </div>
        </a>

        <a
          href="https://www.linkedin.com/in/flavio-ore"
          target="_blank"
          rel="noopener noreferrer"
          class="flex items-center gap-4 p-4 rounded-lg border border-yellow-300 dark:border-yellow-900 bg-white/50 dark:bg-black/20 hover:border-blue-500 dark:hover:border-blue-500 hover:shadow-lg transition-all group"
        >
          <div
            class="p-3 rounded-lg bg-blue-100 dark:bg-blue-900/30 group-hover:scale-110 transition-transform"
          >
            <LinkedInIcon class="size-6 text-blue-600 dark:text-blue-400" />
          </div>
          <div>
            <p class="text-sm font-semibold dark:text-amber-300 text-amber-700">
              LinkedIn
            </p>
            <p
              class="text-base dark:text-amber-100 text-amber-900 group-hover:text-blue-500 dark:group-hover:text-blue-400 transition-colors"
            >
              in/flavio-ore
            </p>
          </div>
        </a>

        <a
          href="https://github.com/Flavio-Ore"
          target="_blank"
          rel="noopener noreferrer"
          class="flex items-center gap-4 p-4 rounded-lg border border-yellow-300 dark:border-yellow-900 bg-white/50 dark:bg-black/20 hover:border-gray-600 dark:hover:border-gray-400 hover:shadow-lg transition-all group"
        >
          <div
            class="p-3 rounded-lg bg-gray-100 dark:bg-gray-800 group-hover:scale-110 transition-transform"
          >
            <GithubIcon class="size-6 text-gray-700 dark:text-gray-300" />
          </div>
          <div>
            <p class="text-sm font-semibold dark:text-amber-300 text-amber-700">
              GitHub
            </p>
            <p
              class="text-base dark:text-amber-100 text-amber-900 group-hover:text-gray-700 dark:group-hover:text-gray-300 transition-colors"
            >
              @Flavio-Ore
            </p>
          </div>
        </a>
      </div>
    </div>

    <!-- Contact Form -->
    <div>
      <form
        id="contact-form"
        class="space-y-4"
        action="https://formspree.io/f/YOUR_FORM_ID"
        method="POST"
      >
        <div>
          <label
            for="name"
            class="block text-sm font-semibold mb-2 dark:text-amber-300 text-amber-700"
          >
            {t("contact.form.name")}
          </label>
          <input
            type="text"
            id="name"
            name="name"
            required
            class="w-full px-4 py-3 rounded-lg border border-yellow-300 dark:border-yellow-900 bg-white dark:bg-gray-900 text-amber-900 dark:text-amber-100 focus:outline-none focus:ring-2 focus:ring-orange-500 transition-all"
            placeholder={t("contact.form.namePlaceholder")}
          />
        </div>

        <div>
          <label
            for="email"
            class="block text-sm font-semibold mb-2 dark:text-amber-300 text-amber-700"
          >
            Email
          </label>
          <input
            type="email"
            id="email"
            name="email"
            required
            class="w-full px-4 py-3 rounded-lg border border-yellow-300 dark:border-yellow-900 bg-white dark:bg-gray-900 text-amber-900 dark:text-amber-100 focus:outline-none focus:ring-2 focus:ring-orange-500 transition-all"
            placeholder={t("contact.form.emailPlaceholder")}
          />
        </div>

        <div>
          <label
            for="message"
            class="block text-sm font-semibold mb-2 dark:text-amber-300 text-amber-700"
          >
            {t("contact.form.message")}
          </label>
          <textarea
            id="message"
            name="message"
            required
            rows="5"
            class="w-full px-4 py-3 rounded-lg border border-yellow-300 dark:border-yellow-900 bg-white dark:bg-gray-900 text-amber-900 dark:text-amber-100 focus:outline-none focus:ring-2 focus:ring-orange-500 transition-all resize-none"
            placeholder={t("contact.form.messagePlaceholder")}></textarea>
        </div>

        <button
          type="submit"
          class="w-full px-6 py-3 font-semibold text-white bg-gradient-to-r from-orange-600 to-amber-700 rounded-lg hover:from-orange-600 hover:to-amber-600 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 dark:focus:ring-offset-dark transition-all hover:scale-[1.02] hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed"
        >
          {t("contact.form.submit")}
        </button>
      </form>

      <div
        id="form-status"
        class="hidden mt-4 p-4 rounded-lg text-center font-medium"
      >
      </div>
    </div>
  </div>
</section>

<script>
  const form = document.getElementById("contact-form") as HTMLFormElement;
  const statusDiv = document.getElementById("form-status");

  form?.addEventListener("submit", async (e) => {
    e.preventDefault();

    const submitButton = form.querySelector(
      'button[type="submit"]',
    ) as HTMLButtonElement;
    submitButton.disabled = true;
    submitButton.textContent = "Sending...";

    try {
      // For now, just show success (you can integrate with Formspree or another service)
      // const formData = new FormData(form);
      await new Promise((resolve) => setTimeout(resolve, 1000));

      if (statusDiv) {
        statusDiv.classList.remove("hidden", "bg-red-100", "text-red-700");
        statusDiv.classList.add("bg-green-100", "text-green-700");
        statusDiv.textContent = "Message sent successfully! ðŸŽ‰";
        form.reset();
      }
    } catch (error) {
      if (statusDiv) {
        statusDiv.classList.remove("hidden", "bg-green-100", "text-green-700");
        statusDiv.classList.add("bg-red-100", "text-red-700");
        statusDiv.textContent = "Failed to send message. Please try again.";
      }
    } finally {
      submitButton.disabled = false;
      submitButton.textContent = "Send Message";
    }
  });
</script>
